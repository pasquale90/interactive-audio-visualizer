\hypertarget{classSettingsDB}{}\doxysection{Settings\+DB Class Reference}
\label{classSettingsDB}\index{SettingsDB@{SettingsDB}}


Class to manage settings using a SQLite database.  




{\ttfamily \#include $<$settings.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classSettingsDB_a747cc6447e717ecfecd306b60a98169f}{Settings\+DB}} (const std\+::string \&db\+\_\+path=\mbox{\hyperlink{namespacePaths_a9a34ad13812f905ddf7ef5d2e7b8df1b}{Paths\+::database\+Path}})
\begin{DoxyCompactList}\small\item\em Constructor to initialize the database connection. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classSettingsDB_abae491addee6520ecf6c00622b776521}{save\+Settings}} (const std\+::unordered\+\_\+map$<$ std\+::string, std\+::string $>$ \&settings)
\begin{DoxyCompactList}\small\item\em Function to save the given settings to the database. \end{DoxyCompactList}\item 
std\+::unordered\+\_\+map$<$ std\+::string, std\+::string $>$ \mbox{\hyperlink{classSettingsDB_ab394914d6d206f32eb68103c447d73d9}{load\+Settings}} ()
\begin{DoxyCompactList}\small\item\em Function to load the settings from the database. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classSettingsDB_a32c5d5d956d09f1c1ba56f69ca738fe1}{$\sim$\+Settings\+DB}} ()
\begin{DoxyCompactList}\small\item\em Destructor to close the database connection and deallocate sql resources. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classSettingsDB_ad0015ca4bb6ed4e1ad4ac3f2c6977df9}{Settings\+DB}} (const \mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \&)=delete
\begin{DoxyCompactList}\small\item\em Copy constructor is deleted to prevent accidental use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \& \mbox{\hyperlink{classSettingsDB_ad9cd05aa2c6f9e37614f7457aff401e1}{operator=}} (const \mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \&)=delete
\begin{DoxyCompactList}\small\item\em Copy assignment operator is deleted to prevent accidental use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classSettingsDB_a23b417a133b044eab85b9c11da9c231d}{Settings\+DB}} (\mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \&\&)=delete
\begin{DoxyCompactList}\small\item\em Move constructor is deleted to prevent accidental use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \& \mbox{\hyperlink{classSettingsDB_ad09ea87a88c73007c49058304fd7ac69}{operator=}} (\mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \&\&)=delete
\begin{DoxyCompactList}\small\item\em Move assignment operator is deleted to prevent accidental use. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class to manage settings using a SQLite database. 

Definition at line \mbox{\hyperlink{settings_8h_source_l00011}{11}} of file \mbox{\hyperlink{settings_8h_source}{settings.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classSettingsDB_a747cc6447e717ecfecd306b60a98169f}\label{classSettingsDB_a747cc6447e717ecfecd306b60a98169f}} 
\index{SettingsDB@{SettingsDB}!SettingsDB@{SettingsDB}}
\index{SettingsDB@{SettingsDB}!SettingsDB@{SettingsDB}}
\doxysubsubsection{\texorpdfstring{SettingsDB()}{SettingsDB()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily Settings\+DB\+::\+Settings\+DB (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{db\+\_\+path = {\ttfamily \mbox{\hyperlink{namespacePaths_a9a34ad13812f905ddf7ef5d2e7b8df1b}{Paths\+::database\+Path}}} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Constructor to initialize the database connection. 


\begin{DoxyParams}{Parameters}
{\em db\+\_\+path} & -\/ The path to the SQLite database file. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
If the database file does not exist, it will be created. 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{settings_8cpp_source_l00005}{5}} of file \mbox{\hyperlink{settings_8cpp_source}{settings.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00005                                                : dbPath(db\_path) \{}
\DoxyCodeLine{00006    }
\DoxyCodeLine{00007     \textcolor{keywordflow}{if} (sqlite3\_open(dbPath.c\_str(), \&db) != SQLITE\_OK) \{}
\DoxyCodeLine{00008         db = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00009         \textcolor{keywordflow}{return};}
\DoxyCodeLine{00010     \}}
\DoxyCodeLine{00011     }
\DoxyCodeLine{00012     \textcolor{comment}{// Create table if it doesn't exist}}
\DoxyCodeLine{00013     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* createTableSQL = }
\DoxyCodeLine{00014         \textcolor{stringliteral}{"{}CREATE TABLE IF NOT EXISTS settings ("{}}}
\DoxyCodeLine{00015         \textcolor{stringliteral}{"{}setting\_name TEXT PRIMARY KEY,"{}}}
\DoxyCodeLine{00016         \textcolor{stringliteral}{"{}setting\_value TEXT NOT NULL);"{}};}
\DoxyCodeLine{00017 }
\DoxyCodeLine{00018     \textcolor{keywordtype}{char}* errMsg = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00019     \textcolor{keywordflow}{if} (sqlite3\_exec(db, createTableSQL, \textcolor{keyword}{nullptr}, \textcolor{keyword}{nullptr}, \&errMsg) != SQLITE\_OK) \{}
\DoxyCodeLine{00020         sqlite3\_free(errMsg);}
\DoxyCodeLine{00021         sqlite3\_close(db);}
\DoxyCodeLine{00022         db = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00023     \}}
\DoxyCodeLine{00024 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classSettingsDB_a32c5d5d956d09f1c1ba56f69ca738fe1}\label{classSettingsDB_a32c5d5d956d09f1c1ba56f69ca738fe1}} 
\index{SettingsDB@{SettingsDB}!````~SettingsDB@{$\sim$SettingsDB}}
\index{````~SettingsDB@{$\sim$SettingsDB}!SettingsDB@{SettingsDB}}
\doxysubsubsection{\texorpdfstring{$\sim$SettingsDB()}{~SettingsDB()}}
{\footnotesize\ttfamily Settings\+DB\+::$\sim$\+Settings\+DB (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Destructor to close the database connection and deallocate sql resources. 



Definition at line \mbox{\hyperlink{settings_8cpp_source_l00026}{26}} of file \mbox{\hyperlink{settings_8cpp_source}{settings.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00026                        \{}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028     \textcolor{keywordflow}{if} (db) \{}
\DoxyCodeLine{00029         sqlite3\_close(db);}
\DoxyCodeLine{00030     \}}
\DoxyCodeLine{00031     }
\DoxyCodeLine{00032 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classSettingsDB_ad0015ca4bb6ed4e1ad4ac3f2c6977df9}\label{classSettingsDB_ad0015ca4bb6ed4e1ad4ac3f2c6977df9}} 
\index{SettingsDB@{SettingsDB}!SettingsDB@{SettingsDB}}
\index{SettingsDB@{SettingsDB}!SettingsDB@{SettingsDB}}
\doxysubsubsection{\texorpdfstring{SettingsDB()}{SettingsDB()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily Settings\+DB\+::\+Settings\+DB (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy constructor is deleted to prevent accidental use. 

\mbox{\Hypertarget{classSettingsDB_a23b417a133b044eab85b9c11da9c231d}\label{classSettingsDB_a23b417a133b044eab85b9c11da9c231d}} 
\index{SettingsDB@{SettingsDB}!SettingsDB@{SettingsDB}}
\index{SettingsDB@{SettingsDB}!SettingsDB@{SettingsDB}}
\doxysubsubsection{\texorpdfstring{SettingsDB()}{SettingsDB()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily Settings\+DB\+::\+Settings\+DB (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \&\&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Move constructor is deleted to prevent accidental use. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classSettingsDB_ab394914d6d206f32eb68103c447d73d9}\label{classSettingsDB_ab394914d6d206f32eb68103c447d73d9}} 
\index{SettingsDB@{SettingsDB}!loadSettings@{loadSettings}}
\index{loadSettings@{loadSettings}!SettingsDB@{SettingsDB}}
\doxysubsubsection{\texorpdfstring{loadSettings()}{loadSettings()}}
{\footnotesize\ttfamily std\+::unordered\+\_\+map$<$ std\+::string, std\+::string $>$ Settings\+DB\+::load\+Settings (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Function to load the settings from the database. 

\begin{DoxyReturn}{Returns}
std\+::unordered\+\_\+map$<$std\+::string, std\+::string$>$ -\/ The loaded settings. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{settings_8cpp_source_l00080}{80}} of file \mbox{\hyperlink{settings_8cpp_source}{settings.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00080                                                                 \{}
\DoxyCodeLine{00081     std::unordered\_map<std::string, std::string> settings;}
\DoxyCodeLine{00082     }
\DoxyCodeLine{00083     \textcolor{keywordflow}{if} (!db) \textcolor{keywordflow}{return} settings;}
\DoxyCodeLine{00084 }
\DoxyCodeLine{00085     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* selectSQL = \textcolor{stringliteral}{"{}SELECT setting\_name, setting\_value FROM settings;"{}};}
\DoxyCodeLine{00086     sqlite3\_stmt* stmt;}
\DoxyCodeLine{00087 }
\DoxyCodeLine{00088     \textcolor{keywordflow}{if} (sqlite3\_prepare\_v2(db, selectSQL, -\/1, \&stmt, \textcolor{keyword}{nullptr}) != SQLITE\_OK) \{}
\DoxyCodeLine{00089         \textcolor{keywordflow}{return} settings;}
\DoxyCodeLine{00090     \}}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092     \textcolor{keywordflow}{while} (sqlite3\_step(stmt) == SQLITE\_ROW) \{}
\DoxyCodeLine{00093         std::string name = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(sqlite3\_column\_text(stmt, 0));}
\DoxyCodeLine{00094         std::string value = \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(sqlite3\_column\_text(stmt, 1));}
\DoxyCodeLine{00095         settings[name] = value;}
\DoxyCodeLine{00096     \}}
\DoxyCodeLine{00097 }
\DoxyCodeLine{00098     sqlite3\_finalize(stmt);}
\DoxyCodeLine{00099     \textcolor{keywordflow}{return} settings;}
\DoxyCodeLine{00100 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classSettingsDB_ad9cd05aa2c6f9e37614f7457aff401e1}\label{classSettingsDB_ad9cd05aa2c6f9e37614f7457aff401e1}} 
\index{SettingsDB@{SettingsDB}!operator=@{operator=}}
\index{operator=@{operator=}!SettingsDB@{SettingsDB}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \& Settings\+DB\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy assignment operator is deleted to prevent accidental use. 

\mbox{\Hypertarget{classSettingsDB_ad09ea87a88c73007c49058304fd7ac69}\label{classSettingsDB_ad09ea87a88c73007c49058304fd7ac69}} 
\index{SettingsDB@{SettingsDB}!operator=@{operator=}}
\index{operator=@{operator=}!SettingsDB@{SettingsDB}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \& Settings\+DB\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classSettingsDB}{Settings\+DB}} \&\&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Move assignment operator is deleted to prevent accidental use. 

\mbox{\Hypertarget{classSettingsDB_abae491addee6520ecf6c00622b776521}\label{classSettingsDB_abae491addee6520ecf6c00622b776521}} 
\index{SettingsDB@{SettingsDB}!saveSettings@{saveSettings}}
\index{saveSettings@{saveSettings}!SettingsDB@{SettingsDB}}
\doxysubsubsection{\texorpdfstring{saveSettings()}{saveSettings()}}
{\footnotesize\ttfamily bool Settings\+DB\+::save\+Settings (\begin{DoxyParamCaption}\item[{const std\+::unordered\+\_\+map$<$ std\+::string, std\+::string $>$ \&}]{settings }\end{DoxyParamCaption})}



Function to save the given settings to the database. 


\begin{DoxyParams}{Parameters}
{\em const} & std\+::unordered\+\_\+map$<$std\+::string, std\+::string$>$\& settings -\/ The map of settings to be saved. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if the settings were successfully saved, false otherwise. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{settings_8cpp_source_l00034}{34}} of file \mbox{\hyperlink{settings_8cpp_source}{settings.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00034                                                                                     \{}
\DoxyCodeLine{00035     \textcolor{keywordflow}{if} (!db) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037     \textcolor{comment}{// Begin transaction for better performance}}
\DoxyCodeLine{00038     \textcolor{keywordtype}{char}* errMsg = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00039     \textcolor{keywordflow}{if} (sqlite3\_exec(db, \textcolor{stringliteral}{"{}BEGIN TRANSACTION"{}}, \textcolor{keyword}{nullptr}, \textcolor{keyword}{nullptr}, \&errMsg) != SQLITE\_OK) \{}
\DoxyCodeLine{00040         sqlite3\_free(errMsg);}
\DoxyCodeLine{00041         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00042     \}}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044     \textcolor{comment}{// First, clear existing settings}}
\DoxyCodeLine{00045     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* clearSQL = \textcolor{stringliteral}{"{}DELETE FROM settings;"{}};}
\DoxyCodeLine{00046     \textcolor{keywordflow}{if} (sqlite3\_exec(db, clearSQL, \textcolor{keyword}{nullptr}, \textcolor{keyword}{nullptr}, \&errMsg) != SQLITE\_OK) \{}
\DoxyCodeLine{00047         sqlite3\_free(errMsg);}
\DoxyCodeLine{00048         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00049     \}}
\DoxyCodeLine{00050 }
\DoxyCodeLine{00051     \textcolor{comment}{// Prepare the insert statement}}
\DoxyCodeLine{00052     sqlite3\_stmt* stmt;}
\DoxyCodeLine{00053     \textcolor{keyword}{const} \textcolor{keywordtype}{char}* insertSQL = \textcolor{stringliteral}{"{}INSERT INTO settings (setting\_name, setting\_value) VALUES (?, ?);"{}};}
\DoxyCodeLine{00054     \textcolor{keywordflow}{if} (sqlite3\_prepare\_v2(db, insertSQL, -\/1, \&stmt, \textcolor{keyword}{nullptr}) != SQLITE\_OK) \{}
\DoxyCodeLine{00055         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00056     \}}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00058     \textcolor{comment}{// Insert all settings}}
\DoxyCodeLine{00059     \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& [key, value] : settings) \{}
\DoxyCodeLine{00060         sqlite3\_bind\_text(stmt, 1, key.c\_str(), -\/1, SQLITE\_STATIC);}
\DoxyCodeLine{00061         sqlite3\_bind\_text(stmt, 2, value.c\_str(), -\/1, SQLITE\_STATIC);}
\DoxyCodeLine{00062         }
\DoxyCodeLine{00063         \textcolor{keywordflow}{if} (sqlite3\_step(stmt) != SQLITE\_DONE) \{}
\DoxyCodeLine{00064             sqlite3\_finalize(stmt);}
\DoxyCodeLine{00065             \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00066         \}}
\DoxyCodeLine{00067         sqlite3\_reset(stmt);}
\DoxyCodeLine{00068     \}}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070     sqlite3\_finalize(stmt);}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072     \textcolor{keywordflow}{if} (sqlite3\_exec(db, \textcolor{stringliteral}{"{}COMMIT"{}}, \textcolor{keyword}{nullptr}, \textcolor{keyword}{nullptr}, \&errMsg) != SQLITE\_OK) \{}
\DoxyCodeLine{00073         sqlite3\_free(errMsg);}
\DoxyCodeLine{00074         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00075     \}}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00078 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\mbox{\hyperlink{settings_8h}{settings.\+h}}\item 
src/\mbox{\hyperlink{settings_8cpp}{settings.\+cpp}}\end{DoxyCompactItemize}
