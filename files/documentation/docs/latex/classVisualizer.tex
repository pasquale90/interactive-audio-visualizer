\hypertarget{classVisualizer}{}\doxysection{Visualizer Class Reference}
\label{classVisualizer}\index{Visualizer@{Visualizer}}


This class is responsible for managing the camera feed, tracking objects, triggering, and broadcasting the visualized frame to the \mbox{\hyperlink{classIAV}{IAV}} pipeline.  




{\ttfamily \#include $<$visualizer.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classVisualizer_a104487003c9fea602e26c072aae27efc}{Visualizer}} ()
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classVisualizer_a013ec3101407fbe4805f289bc32d1265}{$\sim$\+Visualizer}} ()
\begin{DoxyCompactList}\small\item\em Class destructor. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classVisualizer_a74e89c75b05f50baeb692fd62437e4e4}{Visualizer}} (const \mbox{\hyperlink{classVisualizer}{Visualizer}} \&)=delete
\begin{DoxyCompactList}\small\item\em Copy constructor is deleted to prevent accidental use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classVisualizer_a28d372074c4cacdc426cdcfe56973b1b}{Visualizer}} (\mbox{\hyperlink{classVisualizer}{Visualizer}} \&\&)=delete
\begin{DoxyCompactList}\small\item\em Move constructor is deleted to prevent accidental use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classVisualizer}{Visualizer}} \& \mbox{\hyperlink{classVisualizer_a82746f3d798c920bf97fe5fcc97588bf}{operator=}} (const \mbox{\hyperlink{classVisualizer}{Visualizer}} \&)=delete
\begin{DoxyCompactList}\small\item\em Copy assignment operator is deleted to prevent accidental use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classVisualizer}{Visualizer}} \& \mbox{\hyperlink{classVisualizer_ac4737c1975ddb0072fab8ffbe942ee9f}{operator=}} (\mbox{\hyperlink{classVisualizer}{Visualizer}} \&\&)=delete
\begin{DoxyCompactList}\small\item\em Move assignment operator is deleted to prevent accidental use. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classVisualizer_a968f280b3f09b86105bc662021babbe9}{broadcast}} ()
\begin{DoxyCompactList}\small\item\em Broadcasts the visualized frame to the \mbox{\hyperlink{classIAV}{IAV}} processing pipeline. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classVisualizer_a2c7e8bfe6cc35f01084ae3aeaae768db}{set\+Audiolizer\+Updater}} (std\+::function$<$ void(const bool, const bool, const \mbox{\hyperlink{structRegionOfInterest}{Region\+Of\+Interest}} \&, \mbox{\hyperlink{structTone}{Tone}} \&)$>$)
\begin{DoxyCompactList}\small\item\em Sets the function that is to be used for receiving the \mbox{\hyperlink{classAudiolizer}{Audiolizer}}\textquotesingle{}s update signal. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classVisualizer_a1e2c66042ba2df8011fe934abad95f7b}{update\+Audio\+Signal}} (float)
\begin{DoxyCompactList}\small\item\em Receives the audio signal by the \mbox{\hyperlink{classSine}{Sine}} instance, to update the \mbox{\hyperlink{classWaveform}{Waveform}} and \mbox{\hyperlink{classSpectrogram}{Spectrogram}} instances. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class is responsible for managing the camera feed, tracking objects, triggering, and broadcasting the visualized frame to the \mbox{\hyperlink{classIAV}{IAV}} pipeline. 

Definition at line \mbox{\hyperlink{visualizer_8h_source_l00017}{17}} of file \mbox{\hyperlink{visualizer_8h_source}{visualizer.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classVisualizer_a104487003c9fea602e26c072aae27efc}\label{classVisualizer_a104487003c9fea602e26c072aae27efc}} 
\index{Visualizer@{Visualizer}!Visualizer@{Visualizer}}
\index{Visualizer@{Visualizer}!Visualizer@{Visualizer}}
\doxysubsubsection{\texorpdfstring{Visualizer()}{Visualizer()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily Visualizer\+::\+Visualizer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Default constructor. 



Definition at line \mbox{\hyperlink{visualizer_8cpp_source_l00011}{11}} of file \mbox{\hyperlink{visualizer_8cpp_source}{visualizer.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00011                       \{}
\DoxyCodeLine{00012 }
\DoxyCodeLine{00013     \textcolor{keywordtype}{int} W=cfg.\mbox{\hyperlink{classConfig_ab6692268f819ce3f8474d1d791f3aaee}{dispconf}}.\mbox{\hyperlink{structDisplayConfig_a633402e1095e221e678ce55fee7f3f9e}{dispResW}}.load();}
\DoxyCodeLine{00014     \textcolor{keywordtype}{int} H=cfg.\mbox{\hyperlink{classConfig_ab6692268f819ce3f8474d1d791f3aaee}{dispconf}}.\mbox{\hyperlink{structDisplayConfig_ae781f975c0fac0c92d0f1802468ee578}{dispResH}}.load();}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016     cv::namedWindow(\textcolor{stringliteral}{"{}Interactive Audio Visualizer"{}},cv::WINDOW\_AUTOSIZE);}
\DoxyCodeLine{00017     cv::Mat img( H , W, CV\_8UC3,cv::Scalar(0,0,0));}
\DoxyCodeLine{00018     visualFrame = img;}
\DoxyCodeLine{00019        }
\DoxyCodeLine{00020     \_create\_camMask();}
\DoxyCodeLine{00021 }
\DoxyCodeLine{00022     \textcolor{keywordtype}{int} cameraW = cfg.\mbox{\hyperlink{classConfig_ac0cf8c10aea198ce117dffb91206251c}{camconf}}.\mbox{\hyperlink{structCameraConfig_a53d5be43d6362ca145c56a64fe475bb9}{camResW}}.load();}
\DoxyCodeLine{00023     \textcolor{keywordtype}{int} cameraH = cfg.\mbox{\hyperlink{classConfig_ac0cf8c10aea198ce117dffb91206251c}{camconf}}.\mbox{\hyperlink{structCameraConfig_a5aacf3ba605a2c6bfa6a88b971557fa2}{camResH}}.load();}
\DoxyCodeLine{00024     LR = W -\/ cameraW;}
\DoxyCodeLine{00025     TB = H -\/ cameraH;}
\DoxyCodeLine{00026 }
\DoxyCodeLine{00027     transpose\_ratio\_x = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(W) / \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(cameraW) / 2.0f;}
\DoxyCodeLine{00028     transpose\_ratio\_y = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(H) / \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float}\textcolor{keyword}{>}(cameraH) / 2.0f;}
\DoxyCodeLine{00029 }
\DoxyCodeLine{00030     trackingToggle = \textcolor{keyword}{false};}
\DoxyCodeLine{00031     }
\DoxyCodeLine{00032     \textcolor{keywordtype}{int} nfft = spectrogram.\mbox{\hyperlink{classSpectrogram_a9e2b3f56852a55ce83311d57104b7208}{get\_numFFTPoints}}();}
\DoxyCodeLine{00033     specMagnitude.reserve(nfft);}
\DoxyCodeLine{00034     specMagnitude.resize(nfft);}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036     \_set\_freq\_midBoundaries();}
\DoxyCodeLine{00037 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classVisualizer_a013ec3101407fbe4805f289bc32d1265}\label{classVisualizer_a013ec3101407fbe4805f289bc32d1265}} 
\index{Visualizer@{Visualizer}!````~Visualizer@{$\sim$Visualizer}}
\index{````~Visualizer@{$\sim$Visualizer}!Visualizer@{Visualizer}}
\doxysubsubsection{\texorpdfstring{$\sim$Visualizer()}{~Visualizer()}}
{\footnotesize\ttfamily Visualizer\+::$\sim$\+Visualizer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Class destructor. 



Definition at line \mbox{\hyperlink{visualizer_8cpp_source_l00187}{187}} of file \mbox{\hyperlink{visualizer_8cpp_source}{visualizer.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00187                        \{}
\DoxyCodeLine{00188     cv::destroyWindow(\textcolor{stringliteral}{"{}Interactive Audio Visualizer"{}});  }
\DoxyCodeLine{00189     visualFrame.release();}
\DoxyCodeLine{00190     cameraFrame.release();}
\DoxyCodeLine{00191     camBinaryMask.release();}
\DoxyCodeLine{00192 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classVisualizer_a74e89c75b05f50baeb692fd62437e4e4}\label{classVisualizer_a74e89c75b05f50baeb692fd62437e4e4}} 
\index{Visualizer@{Visualizer}!Visualizer@{Visualizer}}
\index{Visualizer@{Visualizer}!Visualizer@{Visualizer}}
\doxysubsubsection{\texorpdfstring{Visualizer()}{Visualizer()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily Visualizer\+::\+Visualizer (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classVisualizer}{Visualizer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy constructor is deleted to prevent accidental use. 

\mbox{\Hypertarget{classVisualizer_a28d372074c4cacdc426cdcfe56973b1b}\label{classVisualizer_a28d372074c4cacdc426cdcfe56973b1b}} 
\index{Visualizer@{Visualizer}!Visualizer@{Visualizer}}
\index{Visualizer@{Visualizer}!Visualizer@{Visualizer}}
\doxysubsubsection{\texorpdfstring{Visualizer()}{Visualizer()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily Visualizer\+::\+Visualizer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classVisualizer}{Visualizer}} \&\&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Move constructor is deleted to prevent accidental use. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classVisualizer_a968f280b3f09b86105bc662021babbe9}\label{classVisualizer_a968f280b3f09b86105bc662021babbe9}} 
\index{Visualizer@{Visualizer}!broadcast@{broadcast}}
\index{broadcast@{broadcast}!Visualizer@{Visualizer}}
\doxysubsubsection{\texorpdfstring{broadcast()}{broadcast()}}
{\footnotesize\ttfamily void Visualizer\+::broadcast (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Broadcasts the visualized frame to the \mbox{\hyperlink{classIAV}{IAV}} processing pipeline. 

\begin{DoxyNote}{Note}
Runs in a separate thread. 
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{visualizer_8cpp_source_l00142}{142}} of file \mbox{\hyperlink{visualizer_8cpp_source}{visualizer.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00142                           \{}
\DoxyCodeLine{00143 }
\DoxyCodeLine{00144     \textcolor{keywordtype}{bool} trackingEnabled,trackingUpdated;}
\DoxyCodeLine{00145     \mbox{\hyperlink{structRegionOfInterest}{RegionOfInterest}} trackingSig;}
\DoxyCodeLine{00146     \mbox{\hyperlink{structTone}{Tone}} tone;}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148     \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150         \textcolor{comment}{// camera in visualizer}}
\DoxyCodeLine{00151         \textcolor{keywordtype}{bool} frameElapsed = camera.\mbox{\hyperlink{classCamera_abf92424200235ed48ec2d7135f02127e}{capture}}(cameraFrame); \textcolor{comment}{// get data}}
\DoxyCodeLine{00152         \textcolor{keywordflow}{if} (!frameElapsed)\{}
\DoxyCodeLine{00153             \textcolor{keywordflow}{return};}
\DoxyCodeLine{00154         \}   }
\DoxyCodeLine{00155 }
\DoxyCodeLine{00156         \textcolor{keywordtype}{float} remaining\_percentage;}
\DoxyCodeLine{00157         trackingEnabled = trigger.\mbox{\hyperlink{classTrigger_a0f1b544e6fdc6ed75b2888113fc413a2}{isTrackingEnabled}}(remaining\_percentage);}
\DoxyCodeLine{00158         updateTrackingMode(trackingEnabled);}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160         \textcolor{keywordflow}{if} (trackingEnabled)\{ \textcolor{comment}{// preprocess visual\_frame -\/-\/>   doesn't depict the frame, it just edits it so it does not require a new frame to be captured by the camera.}}
\DoxyCodeLine{00161             }
\DoxyCodeLine{00162             trackingUpdated = videoTracker.\mbox{\hyperlink{classVideoTracker_a548651167191b0d3f5e69d252e3f30da}{trackObject}}(cameraFrame, trackingSig);}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164             \textcolor{keywordflow}{if} (!trackingUpdated)\{}
\DoxyCodeLine{00165                 \textcolor{comment}{// reset}}
\DoxyCodeLine{00166                 trigger.\mbox{\hyperlink{classTrigger_a465a643de1ace6e23b5d4e0f8c94d5a0}{reset}}();}
\DoxyCodeLine{00167             \}            }
\DoxyCodeLine{00168                 }
\DoxyCodeLine{00169             \textcolor{comment}{// update the current visualframe according to the changing of the tracking stimulus}}
\DoxyCodeLine{00170             \_set\_BG\_manually(tone);}
\DoxyCodeLine{00171             \_set\_FG\_manually(trackingSig);}
\DoxyCodeLine{00172 }
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174         \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00175             \_setToCamera(remaining\_percentage);}
\DoxyCodeLine{00176             trackingUpdated = trackingEnabled = \textcolor{keyword}{false};}
\DoxyCodeLine{00177         \}}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00179         updateAudioLizer(trackingUpdated, trackingEnabled, trackingSig, tone);}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181         \textcolor{keywordtype}{bool} exit\_msg = \_showFrame();}
\DoxyCodeLine{00182         \textcolor{keywordflow}{if} (exit\_msg)}
\DoxyCodeLine{00183             \textcolor{keywordflow}{break};}
\DoxyCodeLine{00184     \}}
\DoxyCodeLine{00185 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classVisualizer_a82746f3d798c920bf97fe5fcc97588bf}\label{classVisualizer_a82746f3d798c920bf97fe5fcc97588bf}} 
\index{Visualizer@{Visualizer}!operator=@{operator=}}
\index{operator=@{operator=}!Visualizer@{Visualizer}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classVisualizer}{Visualizer}} \& Visualizer\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classVisualizer}{Visualizer}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy assignment operator is deleted to prevent accidental use. 

\mbox{\Hypertarget{classVisualizer_ac4737c1975ddb0072fab8ffbe942ee9f}\label{classVisualizer_ac4737c1975ddb0072fab8ffbe942ee9f}} 
\index{Visualizer@{Visualizer}!operator=@{operator=}}
\index{operator=@{operator=}!Visualizer@{Visualizer}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classVisualizer}{Visualizer}} \& Visualizer\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classVisualizer}{Visualizer}} \&\&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Move assignment operator is deleted to prevent accidental use. 

\mbox{\Hypertarget{classVisualizer_a2c7e8bfe6cc35f01084ae3aeaae768db}\label{classVisualizer_a2c7e8bfe6cc35f01084ae3aeaae768db}} 
\index{Visualizer@{Visualizer}!setAudiolizerUpdater@{setAudiolizerUpdater}}
\index{setAudiolizerUpdater@{setAudiolizerUpdater}!Visualizer@{Visualizer}}
\doxysubsubsection{\texorpdfstring{setAudiolizerUpdater()}{setAudiolizerUpdater()}}
{\footnotesize\ttfamily void Visualizer\+::set\+Audiolizer\+Updater (\begin{DoxyParamCaption}\item[{std\+::function$<$ void(const bool, const bool, const \mbox{\hyperlink{structRegionOfInterest}{Region\+Of\+Interest}} \&, \mbox{\hyperlink{structTone}{Tone}} \&)$>$}]{function }\end{DoxyParamCaption})}



Sets the function that is to be used for receiving the \mbox{\hyperlink{classAudiolizer}{Audiolizer}}\textquotesingle{}s update signal. 


\begin{DoxyParams}{Parameters}
{\em std\+::function$<$void(const} & bool, const bool, const \mbox{\hyperlink{structRegionOfInterest}{Region\+Of\+Interest}}\&, \mbox{\hyperlink{structTone}{Tone}}\&)\texorpdfstring{$>$}{>} -\/ The function to be called for receiving the \mbox{\hyperlink{classAudiolizer}{Audiolizer}}\textquotesingle{}s update signal. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Audiolizer\+Updater
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em 1} & const bool tracking\+Updated -\/ variable that indicates whether there is a new tracking signal.. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Audiolizer\+Updater
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em 2} & const bool tracking\+Enabled -\/ variable that indicates whether the tracking is enabled or not. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Audiolizer\+Updater
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em 3} & const \mbox{\hyperlink{structRegionOfInterest}{Region\+Of\+Interest}}\& roi -\/ variable passed by reference that updates the value of the current tracking signal. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
Audiolizer\+Updater
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em 4} & \mbox{\hyperlink{structTone}{Tone}}\& -\/ the tone object for storing the current frequency and volume. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{visualizer_8cpp_source_l00039}{39}} of file \mbox{\hyperlink{visualizer_8cpp_source}{visualizer.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00039                                                                                                                        \{}
\DoxyCodeLine{00040     updateAudioLizer = std::move(function);}
\DoxyCodeLine{00041 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classVisualizer_a1e2c66042ba2df8011fe934abad95f7b}\label{classVisualizer_a1e2c66042ba2df8011fe934abad95f7b}} 
\index{Visualizer@{Visualizer}!updateAudioSignal@{updateAudioSignal}}
\index{updateAudioSignal@{updateAudioSignal}!Visualizer@{Visualizer}}
\doxysubsubsection{\texorpdfstring{updateAudioSignal()}{updateAudioSignal()}}
{\footnotesize\ttfamily void Visualizer\+::update\+Audio\+Signal (\begin{DoxyParamCaption}\item[{float}]{new\+Value }\end{DoxyParamCaption})}



Receives the audio signal by the \mbox{\hyperlink{classSine}{Sine}} instance, to update the \mbox{\hyperlink{classWaveform}{Waveform}} and \mbox{\hyperlink{classSpectrogram}{Spectrogram}} instances. 


\begin{DoxyParams}{Parameters}
{\em float} & -\/ the audio signal received by the \mbox{\hyperlink{classSine}{Sine}} instance. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{visualizer_8cpp_source_l00055}{55}} of file \mbox{\hyperlink{visualizer_8cpp_source}{visualizer.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00055                                                 \{}
\DoxyCodeLine{00056     waveform.\mbox{\hyperlink{classWaveform_a6b4f4455a6a8ae2222f967e88b80460b}{write}}(newValue);}
\DoxyCodeLine{00057     spectrogram.\mbox{\hyperlink{classSpectrogram_ab4f694b0b0fac913263703b588361090}{write}}(newValue);}
\DoxyCodeLine{00058 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\mbox{\hyperlink{visualizer_8h}{visualizer.\+h}}\item 
src/\mbox{\hyperlink{visualizer_8cpp}{visualizer.\+cpp}}\end{DoxyCompactItemize}
