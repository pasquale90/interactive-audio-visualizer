\hypertarget{classAudioStream}{}\doxysection{Audio\+Stream Class Reference}
\label{classAudioStream}\index{AudioStream@{AudioStream}}


A class representing the audio streaming functionality.  




{\ttfamily \#include $<$audio.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classAudioStream_ab2e106f7e2f70f0cfb1d7b171da71f16}{Audio\+Stream}} ()
\begin{DoxyCompactList}\small\item\em Class contructor. In this program, a set\+Config is used for implicit initialization. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classAudioStream_a480e5d3468bfe9357dd6c40649b1e449}{$\sim$\+Audio\+Stream}} ()
\begin{DoxyCompactList}\small\item\em class destructor disconnects the client from the server \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classAudioStream_ab4f577911f9c1b1ae64de56e6b2b96af}{client\+Connect}} (std\+::mutex \&, std\+::condition\+\_\+variable \&, bool \&)
\begin{DoxyCompactList}\small\item\em Starts a connection to the server and creates the connection graph which connects the inputs with the outputs. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classAudioStream_a86a07551cb80ac8248ad0b1953ffb81d}{close\+Stream}} ()
\begin{DoxyCompactList}\small\item\em Disconnects the client from the server. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classAudioStream_ac6b5d301d25e74b9b18a58cf5d854385}{stream\+Buffer}} ()
\begin{DoxyCompactList}\small\item\em Member function for streaming the audio buffer. It is a Callback function called implicitly via the static Audio\+Stream\+::stream\+Audio function. Inside the function, the sine wave generator is called to fill the audio buffers with the generated sine waves. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classAudioStream_a79ba2b085605b367698a204bb28fc6e7}{update}} (int, float)
\begin{DoxyCompactList}\small\item\em Updates the tone member variable with a new frequency and volume. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classAudioStream_a0f4ac8181f32c9b1466eb35ed723b167}{set\+Visualizer\+Updater}} (std\+::function$<$ void(float)$>$)
\begin{DoxyCompactList}\small\item\em Sets the visualizer updater function. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classAudioStream_a2e8501a76d4801c9f91bda8bfba583e4}{Audio\+Stream}} (const \mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \&)=delete
\begin{DoxyCompactList}\small\item\em Copy constructor is deleted to prevent accidental use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classAudioStream_aad83ff2805214222217732d8acc76ff9}{Audio\+Stream}} (\mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \&\&)=delete
\begin{DoxyCompactList}\small\item\em Move constructor is deleted to prevent accidental use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \& \mbox{\hyperlink{classAudioStream_a012dba5698b8dab4d86d23f531a97181}{operator=}} (const \mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \&)=delete
\begin{DoxyCompactList}\small\item\em Copy assignment operator is deleted to prevent accidental use. \end{DoxyCompactList}\item 
\mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \& \mbox{\hyperlink{classAudioStream_aa193e5e2a4946523712422a6503a87c1}{operator=}} (\mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \&\&)=delete
\begin{DoxyCompactList}\small\item\em Move assignment operator is deleted to prevent accidental use. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
A class representing the audio streaming functionality. 

Class for routing audio signal. Uses the jack audio API. \begin{DoxyNote}{Note}
This class manages the audio streaming process, including connecting to the server, creating the connection graph, and streaming the audio buffer. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See also}
the jack library documentation \+: \href{https://jackaudio.org/api/}{\texttt{ https\+://jackaudio.\+org/api/}} 

jack client example \+: \href{https://github.com/jackaudio/example-clients/blob/master/simple_client.c}{\texttt{ https\+://github.\+com/jackaudio/example-\/clients/blob/master/simple\+\_\+client.\+c}} 
\end{DoxySeeAlso}


Definition at line \mbox{\hyperlink{audio_8h_source_l00022}{22}} of file \mbox{\hyperlink{audio_8h_source}{audio.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classAudioStream_ab2e106f7e2f70f0cfb1d7b171da71f16}\label{classAudioStream_ab2e106f7e2f70f0cfb1d7b171da71f16}} 
\index{AudioStream@{AudioStream}!AudioStream@{AudioStream}}
\index{AudioStream@{AudioStream}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{AudioStream()}{AudioStream()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily Audio\+Stream\+::\+Audio\+Stream (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Class contructor. In this program, a set\+Config is used for implicit initialization. 



Definition at line \mbox{\hyperlink{audio_8cpp_source_l00018}{18}} of file \mbox{\hyperlink{audio_8cpp_source}{audio.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00018                         :audiocfg (\mbox{\hyperlink{classConfig_a2d423929da9ed51425ac0cf219b36f5e}{Config::getInstance}}().audconf)\{}
\DoxyCodeLine{00019 }
\DoxyCodeLine{00020     client\_name=\mbox{\hyperlink{audio_8cpp_ab44315834bf3a9a5d29b7752aac6c09b}{clientName}};}
\DoxyCodeLine{00021     \textcolor{comment}{// nullify all}}
\DoxyCodeLine{00022     client = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00023     todevice = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00024     }
\DoxyCodeLine{00025     \textcolor{keywordflow}{if} (audiocfg.\mbox{\hyperlink{structAudioConfig_ae2854185c92301b90a7775242fe6c629}{numChannels}}.load() == 1)\{}
\DoxyCodeLine{00026         output\_ports[1] = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00027         outputBuffers[1]=\textcolor{keyword}{nullptr};}
\DoxyCodeLine{00028         make\_sound = \&\mbox{\hyperlink{classSine_abfd05b20115daa6b486ac26c3cb25129}{Sine::setMonoSignal}};  \textcolor{comment}{// Point to setMonoSignal for processing 1 single mono buffer}}
\DoxyCodeLine{00029     \}        }
\DoxyCodeLine{00030     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (audiocfg.\mbox{\hyperlink{structAudioConfig_ae2854185c92301b90a7775242fe6c629}{numChannels}}.load() == 2) \{}
\DoxyCodeLine{00031         make\_sound = \&\mbox{\hyperlink{classSine_ae08432c7ada69cff0dd386c1c6b81bf8}{Sine::setStereoSignal}};  \textcolor{comment}{// Point to setStereoSignal for processing 2 stereo buffers}}
\DoxyCodeLine{00032     \}}
\DoxyCodeLine{00033 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classAudioStream_a480e5d3468bfe9357dd6c40649b1e449}\label{classAudioStream_a480e5d3468bfe9357dd6c40649b1e449}} 
\index{AudioStream@{AudioStream}!````~AudioStream@{$\sim$AudioStream}}
\index{````~AudioStream@{$\sim$AudioStream}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{$\sim$AudioStream()}{~AudioStream()}}
{\footnotesize\ttfamily Audio\+Stream\+::$\sim$\+Audio\+Stream (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



class destructor disconnects the client from the server 



Definition at line \mbox{\hyperlink{audio_8cpp_source_l00039}{39}} of file \mbox{\hyperlink{audio_8cpp_source}{audio.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00039                          \{}
\DoxyCodeLine{00040     \mbox{\hyperlink{classAudioStream_a86a07551cb80ac8248ad0b1953ffb81d}{closeStream}}();}
\DoxyCodeLine{00041     std::cout<<\textcolor{stringliteral}{"{}Audio stream object destructed"{}}<<std::endl;}
\DoxyCodeLine{00042 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classAudioStream_a2e8501a76d4801c9f91bda8bfba583e4}\label{classAudioStream_a2e8501a76d4801c9f91bda8bfba583e4}} 
\index{AudioStream@{AudioStream}!AudioStream@{AudioStream}}
\index{AudioStream@{AudioStream}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{AudioStream()}{AudioStream()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily Audio\+Stream\+::\+Audio\+Stream (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy constructor is deleted to prevent accidental use. 

\mbox{\Hypertarget{classAudioStream_aad83ff2805214222217732d8acc76ff9}\label{classAudioStream_aad83ff2805214222217732d8acc76ff9}} 
\index{AudioStream@{AudioStream}!AudioStream@{AudioStream}}
\index{AudioStream@{AudioStream}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{AudioStream()}{AudioStream()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily Audio\+Stream\+::\+Audio\+Stream (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \&\&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Move constructor is deleted to prevent accidental use. 



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classAudioStream_ab4f577911f9c1b1ae64de56e6b2b96af}\label{classAudioStream_ab4f577911f9c1b1ae64de56e6b2b96af}} 
\index{AudioStream@{AudioStream}!clientConnect@{clientConnect}}
\index{clientConnect@{clientConnect}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{clientConnect()}{clientConnect()}}
{\footnotesize\ttfamily void Audio\+Stream\+::client\+Connect (\begin{DoxyParamCaption}\item[{std\+::mutex \&}]{mtx,  }\item[{std\+::condition\+\_\+variable \&}]{cv,  }\item[{bool \&}]{server\+Started }\end{DoxyParamCaption})}



Starts a connection to the server and creates the connection graph which connects the inputs with the outputs. 


\begin{DoxyParams}{Parameters}
{\em mutex\&} & -\/ mutex for synchronization with the server \\
\hline
{\em condition\+\_\+variable\&} & -\/ condition variable for synchronization with the server \\
\hline
{\em bool\&} & -\/ boolean indicating whether the server has started \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{audio_8cpp_source_l00044}{44}} of file \mbox{\hyperlink{audio_8cpp_source}{audio.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00044                                                                                             \{}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046     std::cout << \textcolor{stringliteral}{"{}Waiting for jack server to start\(\backslash\)n"{}};}
\DoxyCodeLine{00047     std::unique\_lock<std::mutex> lock(mtx);}
\DoxyCodeLine{00048     cv.wait(lock, [\&] \{ \textcolor{keywordflow}{return} serverStarted; \});}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050     jack\_options\_t options = JackNoStartServer;\textcolor{comment}{//(JackSessionID|JackServerName|JackNoStartServer|JackUseExactName|JackNullOption)}}
\DoxyCodeLine{00051     jack\_status\_t status;}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053     \textcolor{comment}{/* open a client connection to the JACK server */}}
\DoxyCodeLine{00054     client = jack\_client\_open (client\_name, options, \&status,\textcolor{keyword}{nullptr});}
\DoxyCodeLine{00055     \textcolor{keywordflow}{if} (status \& JackNameNotUnique) \{    \textcolor{comment}{//client name not unique, set a client name;}}
\DoxyCodeLine{00056         client\_name = jack\_get\_client\_name(client);}
\DoxyCodeLine{00057         std::cerr<<\textcolor{stringliteral}{"{}\(\backslash\)t>>unique name "{}}<<client\_name<<\textcolor{stringliteral}{"{} assigned to the client obj."{}}<<std::endl;}
\DoxyCodeLine{00058     \}}
\DoxyCodeLine{00059     }
\DoxyCodeLine{00060     \textcolor{keywordflow}{if} (client == NULL) \{}
\DoxyCodeLine{00061         std::cerr<<\textcolor{stringliteral}{"{}\(\backslash\)t>>jack\_client\_open() failed, status = "{}}<<status<<std::endl;}
\DoxyCodeLine{00062         \textcolor{keywordflow}{if} (status \& JackServerFailed) \{}
\DoxyCodeLine{00063             std::cerr<<\textcolor{stringliteral}{"{}\(\backslash\)t>>Unable to connect to JACK server"{}}<<std::endl;}
\DoxyCodeLine{00064         \}}
\DoxyCodeLine{00065         exit (1);}
\DoxyCodeLine{00066     \}}
\DoxyCodeLine{00067     \textcolor{keywordflow}{if} (status \& JackServerStarted) \{}
\DoxyCodeLine{00068         std::cout<<\textcolor{stringliteral}{"{}\(\backslash\)t>>JACK server started"{}}<<std::endl;}
\DoxyCodeLine{00069     \}}
\DoxyCodeLine{00070 }
\DoxyCodeLine{00071     \textcolor{comment}{//callback}}
\DoxyCodeLine{00072     \textcolor{keywordflow}{if} (jack\_set\_process\_callback (client,streamAudio,\textcolor{keyword}{this}))\{ \textcolor{comment}{//arg}}
\DoxyCodeLine{00073             std::cerr<<\textcolor{stringliteral}{"{}\(\backslash\)t>>Callback operation failed"{}}<<std::endl;}
\DoxyCodeLine{00074     \}}
\DoxyCodeLine{00075 }
\DoxyCodeLine{00076     \textcolor{comment}{//prevent failure}}
\DoxyCodeLine{00077     jack\_on\_shutdown(client,\&jack\_shutdown,0);}
\DoxyCodeLine{00078 }
\DoxyCodeLine{00079     \textcolor{comment}{//register physical ports}}
\DoxyCodeLine{00080     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} ch=0; ch<audiocfg.\mbox{\hyperlink{structAudioConfig_ae2854185c92301b90a7775242fe6c629}{numChannels}}.load();++ch)\{}
\DoxyCodeLine{00081         std::string portName = (ch\%2) ? (\textcolor{stringliteral}{"{}PortRight"{}}+std::to\_string(ch/2)) : (\textcolor{stringliteral}{"{}PortLeft"{}}+std::to\_string(ch/2));}
\DoxyCodeLine{00082         \textcolor{comment}{// std::cout<<"{}portName = "{}<<portName<<std::endl;}}
\DoxyCodeLine{00083         output\_ports[ch]=jack\_port\_register (client,portName.c\_str(),JACK\_DEFAULT\_AUDIO\_TYPE, JackPortIsOutput, 0);}
\DoxyCodeLine{00084         \textcolor{comment}{// output\_port\_right=jack\_port\_register (client,"{}rightPort"{},JACK\_DEFAULT\_AUDIO\_TYPE, JackPortIsOutput, 0);}}
\DoxyCodeLine{00085         \textcolor{keywordflow}{if} (output\_ports[ch] == NULL)\{}
\DoxyCodeLine{00086             std::cerr<<\textcolor{stringliteral}{"{}\(\backslash\)t>>Unable to register output port for \{"{}}<<jack\_port\_name(output\_ports[ch])<<\textcolor{stringliteral}{"{}\}"{}}<<std::endl;}
\DoxyCodeLine{00087             exit (1);\}}
\DoxyCodeLine{00088     \}}
\DoxyCodeLine{00089     }
\DoxyCodeLine{00090     \textcolor{comment}{//activate client}}
\DoxyCodeLine{00091     \textcolor{keywordflow}{if} (jack\_activate (client)) \{}
\DoxyCodeLine{00092         std::cerr<<\textcolor{stringliteral}{"{}\(\backslash\)t>>cannot activate client \{"{}}<<client\_name<<\textcolor{stringliteral}{"{}\}"{}}<<std::endl;}
\DoxyCodeLine{00093         exit (1);}
\DoxyCodeLine{00094     \}}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096     \textcolor{comment}{// Getting acces to destination ports}}
\DoxyCodeLine{00097     todevice = jack\_get\_ports (client, NULL, NULL, JackPortIsPhysical|JackPortIsInput);}
\DoxyCodeLine{00098     \textcolor{keywordflow}{if} (todevice == NULL) \{}
\DoxyCodeLine{00099         std::cerr<<\textcolor{stringliteral}{"{}\(\backslash\)t>>no physical playback devices"{}}<<std::endl;}
\DoxyCodeLine{00100         exit (1);}
\DoxyCodeLine{00101     \}}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} ch=0; ch <audiocfg.\mbox{\hyperlink{structAudioConfig_ae2854185c92301b90a7775242fe6c629}{numChannels}}.load();++ch)\{}
\DoxyCodeLine{00104         \textcolor{keywordflow}{if} (output\_ports[ch]!=NULL)\{}
\DoxyCodeLine{00105             \textcolor{keywordflow}{if} (jack\_connect (client, jack\_port\_name(output\_ports[ch]), todevice[ch]))\{\textcolor{comment}{//returns full name}}
\DoxyCodeLine{00106                 std::cerr<<\textcolor{stringliteral}{"{}\(\backslash\)t>>cannot connect left plysical output port \{"{}}<<todevice[ch]<<\textcolor{stringliteral}{"{}\} with input port \{"{}}<<jack\_port\_name(output\_ports[ch])<<\textcolor{stringliteral}{"{}\}"{}}<<std::endl;}
\DoxyCodeLine{00107             \}}
\DoxyCodeLine{00108         \}}
\DoxyCodeLine{00109     \}}
\DoxyCodeLine{00110 }
\DoxyCodeLine{00111     free (todevice);}
\DoxyCodeLine{00112 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classAudioStream_a86a07551cb80ac8248ad0b1953ffb81d}\label{classAudioStream_a86a07551cb80ac8248ad0b1953ffb81d}} 
\index{AudioStream@{AudioStream}!closeStream@{closeStream}}
\index{closeStream@{closeStream}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{closeStream()}{closeStream()}}
{\footnotesize\ttfamily void Audio\+Stream\+::close\+Stream (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Disconnects the client from the server. 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{audio_8cpp_source_l00115}{115}} of file \mbox{\hyperlink{audio_8cpp_source}{audio.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00115                              \{}
\DoxyCodeLine{00116     }
\DoxyCodeLine{00117     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i=0; i<audiocfg.\mbox{\hyperlink{structAudioConfig_ae2854185c92301b90a7775242fe6c629}{numChannels}}.load();++i)\{}
\DoxyCodeLine{00118         \textcolor{keywordflow}{if} (jack\_port\_connected(output\_ports[i]))\{}
\DoxyCodeLine{00119             \textcolor{keywordflow}{if}(jack\_port\_disconnect(client,output\_ports[i]))\{}
\DoxyCodeLine{00120                 std::cerr<<\textcolor{stringliteral}{"{}Couldnt disconnect the "{}}<<jack\_port\_name(output\_ports[i])<<\textcolor{stringliteral}{"{} output port from the main stream"{}}<<std::endl;}
\DoxyCodeLine{00121             \}}
\DoxyCodeLine{00122         \}}
\DoxyCodeLine{00123         }
\DoxyCodeLine{00124     \}}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126     std::cout<<\textcolor{stringliteral}{"{}Closing stream -\/ turning off audio client.."{}}<<std::endl;}
\DoxyCodeLine{00127     jack\_client\_close (client);}
\DoxyCodeLine{00128 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classAudioStream_aa193e5e2a4946523712422a6503a87c1}\label{classAudioStream_aa193e5e2a4946523712422a6503a87c1}} 
\index{AudioStream@{AudioStream}!operator=@{operator=}}
\index{operator=@{operator=}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \& Audio\+Stream\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \&\&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Move assignment operator is deleted to prevent accidental use. 

\mbox{\Hypertarget{classAudioStream_a012dba5698b8dab4d86d23f531a97181}\label{classAudioStream_a012dba5698b8dab4d86d23f531a97181}} 
\index{AudioStream@{AudioStream}!operator=@{operator=}}
\index{operator=@{operator=}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \& Audio\+Stream\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classAudioStream}{Audio\+Stream}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [delete]}}



Copy assignment operator is deleted to prevent accidental use. 

\mbox{\Hypertarget{classAudioStream_a0f4ac8181f32c9b1466eb35ed723b167}\label{classAudioStream_a0f4ac8181f32c9b1466eb35ed723b167}} 
\index{AudioStream@{AudioStream}!setVisualizerUpdater@{setVisualizerUpdater}}
\index{setVisualizerUpdater@{setVisualizerUpdater}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{setVisualizerUpdater()}{setVisualizerUpdater()}}
{\footnotesize\ttfamily void Audio\+Stream\+::set\+Visualizer\+Updater (\begin{DoxyParamCaption}\item[{std\+::function$<$ void(float)$>$}]{updater }\end{DoxyParamCaption})}



Sets the visualizer updater function. 


\begin{DoxyParams}{Parameters}
{\em std\+::$<$void(float)$>$} & -\/ the visualizer updater function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
The visualizer updater function takes one by one an audio sample as a float parameter to write on the FIFO-\/based data structures of \mbox{\hyperlink{classWaveform}{Waveform}} and \mbox{\hyperlink{classSpectrogram}{Spectrogram}}. 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{audio_8cpp_source_l00035}{35}} of file \mbox{\hyperlink{audio_8cpp_source}{audio.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00035                                                                       \{}
\DoxyCodeLine{00036     sine.\mbox{\hyperlink{classSine_a4623d350f103d9dafd5ce29908e59332}{setVisualizerUpdater}}(std::move(updater));}
\DoxyCodeLine{00037 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classAudioStream_ac6b5d301d25e74b9b18a58cf5d854385}\label{classAudioStream_ac6b5d301d25e74b9b18a58cf5d854385}} 
\index{AudioStream@{AudioStream}!streamBuffer@{streamBuffer}}
\index{streamBuffer@{streamBuffer}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{streamBuffer()}{streamBuffer()}}
{\footnotesize\ttfamily int Audio\+Stream\+::stream\+Buffer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Member function for streaming the audio buffer. It is a Callback function called implicitly via the static Audio\+Stream\+::stream\+Audio function. Inside the function, the sine wave generator is called to fill the audio buffers with the generated sine waves. 

\begin{DoxyReturn}{Returns}
int -\/ success message 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{audio_8cpp_source_l00130}{130}} of file \mbox{\hyperlink{audio_8cpp_source}{audio.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00130                              \{}
\DoxyCodeLine{00131 }
\DoxyCodeLine{00132     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} ch = 0 ; ch < audiocfg.\mbox{\hyperlink{structAudioConfig_ae2854185c92301b90a7775242fe6c629}{numChannels}}.load(); ++ch)\{}
\DoxyCodeLine{00133         outputBuffers[ch] = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{float} *\textcolor{keyword}{>}(jack\_port\_get\_buffer (output\_ports[ch], audiocfg.\mbox{\hyperlink{structAudioConfig_ae81381142d99bc1845cb33bd048643df}{bufferSize}}.load() ));}
\DoxyCodeLine{00134     \}}
\DoxyCodeLine{00135     }
\DoxyCodeLine{00136     (sine.*make\_sound)(tone,outputBuffers); }
\DoxyCodeLine{00137     }
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{00140 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classAudioStream_a79ba2b085605b367698a204bb28fc6e7}\label{classAudioStream_a79ba2b085605b367698a204bb28fc6e7}} 
\index{AudioStream@{AudioStream}!update@{update}}
\index{update@{update}!AudioStream@{AudioStream}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void Audio\+Stream\+::update (\begin{DoxyParamCaption}\item[{int}]{frequency,  }\item[{float}]{volume }\end{DoxyParamCaption})}



Updates the tone member variable with a new frequency and volume. 


\begin{DoxyParams}{Parameters}
{\em int} & frequency -\/ the current frequency of the tone \\
\hline
{\em float} & volume -\/ the volume of the tone \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}
Retrieves the minimum and maximum values from the waveform. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em frequency} & The tones spectral frequency. \\
\hline
\mbox{\texttt{ out}}  & {\em volume} & The volume of the tone. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{audio_8cpp_source_l00152}{152}} of file \mbox{\hyperlink{audio_8cpp_source}{audio.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00152                                                    \{}
\DoxyCodeLine{00153     tone.\mbox{\hyperlink{structTone_a8c28a65c858594e410d94921d7abc1fa}{frequency}}.store(frequency);}
\DoxyCodeLine{00154     tone.\mbox{\hyperlink{structTone_ad643b37d799caa83f6a80dc2f001aa4a}{volume}}.store(volume);}
\DoxyCodeLine{00155 \}}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/\mbox{\hyperlink{audio_8h}{audio.\+h}}\item 
src/\mbox{\hyperlink{audio_8cpp}{audio.\+cpp}}\end{DoxyCompactItemize}
