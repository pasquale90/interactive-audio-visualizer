<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_iav_8cpp_source" xml:lang="en-US">
<title>iav.cpp</title>
<indexterm><primary>src/iav.cpp</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_iav_8cpp_source_1l00001"/>00001 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_iav_8h">iav.h</link>&quot;</emphasis>
<anchor xml:id="_iav_8cpp_source_1l00002"/>00002 
<anchor xml:id="_iav_8cpp_source_1l00003"/><link linkend="_classIAV_1aca883bb01682e183436e708ce648be20">00003</link> <link linkend="_classIAV_1aca883bb01682e183436e708ce648be20">IAV::IAV</link>()
<anchor xml:id="_iav_8cpp_source_1l00004"/>00004 {
<anchor xml:id="_iav_8cpp_source_1l00005"/>00005 &#32;&#32;&#32;&#32;audioServer.<link linkend="_classAudioServer_1a19903646817c7d1f3dc2bec8d1f2811e">setup_server</link>();
<anchor xml:id="_iav_8cpp_source_1l00006"/>00006 
<anchor xml:id="_iav_8cpp_source_1l00007"/>00007 &#32;&#32;&#32;&#32;audiolizer.<link linkend="_classAudiolizer_1a615968fb43d145079d06521ad7634946">setAudioUpdater</link>(std::bind(&amp;<link linkend="_classAudioStream_1a79ba2b085605b367698a204bb28fc6e7">AudioStream::update</link>,&amp;audioStream,std::placeholders::_1,std::placeholders::_2));
<anchor xml:id="_iav_8cpp_source_1l00008"/>00008 &#32;&#32;&#32;&#32;visualizer.<link linkend="_classVisualizer_1a2c7e8bfe6cc35f01084ae3aeaae768db">setAudiolizerUpdater</link>(std::bind(&amp;<link linkend="_classAudiolizer_1a2b9a26bd1486ebf2bdae14d7edd370c0">Audiolizer::turn_Image_into_Sound</link>,&#32;&amp;audiolizer,&#32;std::placeholders::_1,std::placeholders::_2,std::placeholders::_3,std::placeholders::_4));
<anchor xml:id="_iav_8cpp_source_1l00009"/>00009 &#32;&#32;&#32;&#32;audioStream.<link linkend="_classAudioStream_1a0f4ac8181f32c9b1466eb35ed723b167">setVisualizerUpdater</link>(std::bind(&amp;<link linkend="_classVisualizer_1a1e2c66042ba2df8011fe934abad95f7b">Visualizer::updateAudioSignal</link>,&#32;&amp;visualizer,&#32;std::placeholders::_1));
<anchor xml:id="_iav_8cpp_source_1l00010"/>00010 
<anchor xml:id="_iav_8cpp_source_1l00011"/>00011 &#32;&#32;&#32;&#32;audServerThread&#32;=&#32;std::thread&#32;(&amp;<link linkend="_classAudioServer_1ad727e135d3776ff9a631e47873a6e239">AudioServer::start_server</link>,&amp;audioServer,std::ref(mtxServer),&#32;std::ref(cvServer),&#32;std::ref(serverStarted));
<anchor xml:id="_iav_8cpp_source_1l00012"/>00012 &#32;&#32;&#32;&#32;audioThread&#32;=&#32;std::thread&#32;(&amp;<link linkend="_classAudioStream_1ab4f577911f9c1b1ae64de56e6b2b96af">AudioStream::clientConnect</link>,&amp;audioStream,std::ref(mtxServer),&#32;std::ref(cvServer),&#32;std::ref(serverStarted));
<anchor xml:id="_iav_8cpp_source_1l00013"/>00013 &#32;&#32;&#32;&#32;visualThread&#32;=&#32;std::thread(&amp;<link linkend="_classVisualizer_1a968f280b3f09b86105bc662021babbe9">Visualizer::broadcast</link>,&amp;visualizer);
<anchor xml:id="_iav_8cpp_source_1l00014"/>00014 
<anchor xml:id="_iav_8cpp_source_1l00015"/>00015 &#32;&#32;&#32;&#32;cfg.<link linkend="_classConfig_1a975933ecde91dc436d4ca39464cfd25f">display</link>();
<anchor xml:id="_iav_8cpp_source_1l00016"/>00016 }
<anchor xml:id="_iav_8cpp_source_1l00017"/>00017 
<anchor xml:id="_iav_8cpp_source_1l00018"/><link linkend="_classIAV_1a787ff827f02c4d780d8036d61591075d">00018</link> <link linkend="_classIAV_1a787ff827f02c4d780d8036d61591075d">IAV::~IAV</link>(){
<anchor xml:id="_iav_8cpp_source_1l00019"/>00019 &#32;&#32;&#32;&#32;audioServer.<link linkend="_classAudioServer_1ae0e8c5f59aac9a1f4311b262e868cc5a">~AudioServer</link>();
<anchor xml:id="_iav_8cpp_source_1l00020"/>00020 &#32;&#32;&#32;&#32;audioStream.<link linkend="_classAudioStream_1a480e5d3468bfe9357dd6c40649b1e449">~AudioStream</link>();
<anchor xml:id="_iav_8cpp_source_1l00021"/>00021 &#32;&#32;&#32;&#32;audiolizer.~Audiolizer()&#32;;
<anchor xml:id="_iav_8cpp_source_1l00022"/>00022 &#32;&#32;&#32;&#32;visualizer.<link linkend="_classVisualizer_1a013ec3101407fbe4805f289bc32d1265">~Visualizer</link>();
<anchor xml:id="_iav_8cpp_source_1l00023"/>00023 }
<anchor xml:id="_iav_8cpp_source_1l00024"/>00024 
<anchor xml:id="_iav_8cpp_source_1l00025"/><link linkend="_classIAV_1a750609975b3e4153e79c1fd012b430f3">00025</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_classIAV_1a750609975b3e4153e79c1fd012b430f3">IAV::start</link>(){
<anchor xml:id="_iav_8cpp_source_1l00026"/>00026 &#32;&#32;&#32;&#32;
<anchor xml:id="_iav_8cpp_source_1l00027"/>00027 &#32;&#32;&#32;&#32;audServerThread.detach();
<anchor xml:id="_iav_8cpp_source_1l00028"/>00028 &#32;&#32;&#32;&#32;audioThread.detach();
<anchor xml:id="_iav_8cpp_source_1l00029"/>00029 &#32;&#32;&#32;&#32;visualThread.join();
<anchor xml:id="_iav_8cpp_source_1l00030"/>00030 
<anchor xml:id="_iav_8cpp_source_1l00031"/>00031 }
</programlisting></section>
