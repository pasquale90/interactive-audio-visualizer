<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_videotracker_8cpp_source" xml:lang="en-US">
<title>videotracker.cpp</title>
<indexterm><primary>src/videotracker.cpp</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_videotracker_8cpp_source_1l00001"/>00001 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_videotracker_8h">videotracker.h</link>&quot;</emphasis>
<anchor xml:id="_videotracker_8cpp_source_1l00002"/>00002 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_roi_8h">roi.h</link>&quot;</emphasis>
<anchor xml:id="_videotracker_8cpp_source_1l00003"/>00003 
<anchor xml:id="_videotracker_8cpp_source_1l00004"/><link linkend="_classVideoTracker_1a8a4eb43cf75ecaec34b1b54b99d7e701">00004</link> <link linkend="_classVideoTracker_1a8a4eb43cf75ecaec34b1b54b99d7e701">VideoTracker::VideoTracker</link>(){
<anchor xml:id="_videotracker_8cpp_source_1l00005"/>00005 
<anchor xml:id="_videotracker_8cpp_source_1l00006"/>00006 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;radius=cfg.<link linkend="_classConfig_1a91839b9ae92f5503ed43baa71da88fdc">iavconf</link>.<link linkend="_structIAVConfig_1ab61ab68c3f8855d2b5b71c8ffcf9844e">roiRadius</link>;
<anchor xml:id="_videotracker_8cpp_source_1l00007"/>00007 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;W=cfg.<link linkend="_classConfig_1ac0cf8c10aea198ce117dffb91206251c">camconf</link>.<link linkend="_structCameraConfig_1a53d5be43d6362ca145c56a64fe475bb9">camResW</link>.load();
<anchor xml:id="_videotracker_8cpp_source_1l00008"/>00008 &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;H=cfg.<link linkend="_classConfig_1ac0cf8c10aea198ce117dffb91206251c">camconf</link>.<link linkend="_structCameraConfig_1a5aacf3ba605a2c6bfa6a88b971557fa2">camResH</link>.load();
<anchor xml:id="_videotracker_8cpp_source_1l00009"/>00009 &#32;&#32;&#32;&#32;cv::Rect&#32;temp((W/2)-radius,(H/2)-radius,radius*2,radius*2);
<anchor xml:id="_videotracker_8cpp_source_1l00010"/>00010 &#32;&#32;&#32;&#32;centerBox=temp;
<anchor xml:id="_videotracker_8cpp_source_1l00011"/>00011 &#32;&#32;&#32;&#32;boundingBox=temp;&#32;
<anchor xml:id="_videotracker_8cpp_source_1l00012"/>00012 }
<anchor xml:id="_videotracker_8cpp_source_1l00013"/>00013 
<anchor xml:id="_videotracker_8cpp_source_1l00014"/>00014 
<anchor xml:id="_videotracker_8cpp_source_1l00015"/><link linkend="_classVideoTracker_1af83065f606e3a076307a156c27f71b11">00015</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_classVideoTracker_1af83065f606e3a076307a156c27f71b11">VideoTracker::initializeTracker</link>(<emphasis role="keyword">const</emphasis>&#32;cv::Mat&amp;&#32;frame){
<anchor xml:id="_videotracker_8cpp_source_1l00016"/>00016 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(cfg.<link linkend="_classConfig_1a91839b9ae92f5503ed43baa71da88fdc">iavconf</link>.<link linkend="_structIAVConfig_1a429208ba4ff9c592ec985055adeef13e">trackingAlg</link>&#32;==&#32;<emphasis role="stringliteral">&quot;CSRT&quot;</emphasis>)&#32;{
<anchor xml:id="_videotracker_8cpp_source_1l00017"/>00017 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;tracker&#32;=&#32;cv::TrackerCSRT::create();
<anchor xml:id="_videotracker_8cpp_source_1l00018"/>00018 &#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;(cfg.<link linkend="_classConfig_1a91839b9ae92f5503ed43baa71da88fdc">iavconf</link>.<link linkend="_structIAVConfig_1a429208ba4ff9c592ec985055adeef13e">trackingAlg</link>&#32;==&#32;<emphasis role="stringliteral">&quot;KCF&quot;</emphasis>)&#32;{
<anchor xml:id="_videotracker_8cpp_source_1l00019"/>00019 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;tracker&#32;=&#32;cv::TrackerKCF::create();
<anchor xml:id="_videotracker_8cpp_source_1l00020"/>00020 &#32;&#32;&#32;&#32;}
<anchor xml:id="_videotracker_8cpp_source_1l00021"/>00021 &#32;&#32;&#32;&#32;boundingBox&#32;=&#32;centerBox;
<anchor xml:id="_videotracker_8cpp_source_1l00022"/>00022 &#32;&#32;&#32;&#32;tracker-&gt;init(frame,&#32;boundingBox);
<anchor xml:id="_videotracker_8cpp_source_1l00023"/>00023 }
<anchor xml:id="_videotracker_8cpp_source_1l00024"/>00024 
<anchor xml:id="_videotracker_8cpp_source_1l00025"/><link linkend="_classVideoTracker_1a548651167191b0d3f5e69d252e3f30da">00025</link> <emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_classVideoTracker_1a548651167191b0d3f5e69d252e3f30da">VideoTracker::trackObject</link>(<emphasis role="keyword">const</emphasis>&#32;cv::Mat&#32;&amp;frame&#32;,&#32;<link linkend="_structRegionOfInterest">RegionOfInterest</link>&#32;&amp;trackingSig){
<anchor xml:id="_videotracker_8cpp_source_1l00026"/>00026 
<anchor xml:id="_videotracker_8cpp_source_1l00027"/>00027 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;trackingUpdated&#32;=&#32;tracker-&gt;update(frame,&#32;boundingBox);
<anchor xml:id="_videotracker_8cpp_source_1l00028"/>00028 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;(trackingUpdated){
<anchor xml:id="_videotracker_8cpp_source_1l00029"/>00029 
<anchor xml:id="_videotracker_8cpp_source_1l00030"/>00030 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;@&#32;comment&#32;:&#32;this&#32;gives&#32;the&#32;center&#32;x,y&#32;and&#32;the&#32;w&#32;and&#32;h</emphasis>
<anchor xml:id="_videotracker_8cpp_source_1l00031"/>00031 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;trackingSig.<link linkend="_structRegionOfInterest_1a7c05ee763a1dbcea5d7722c8611e6bc7">centerX</link>.store(<emphasis role="keyword">static_cast&lt;</emphasis><emphasis role="keywordtype">int</emphasis><emphasis role="keyword">&gt;</emphasis>(boundingBox.x&#32;+&#32;boundingBox.width/2));
<anchor xml:id="_videotracker_8cpp_source_1l00032"/>00032 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;trackingSig.<link linkend="_structRegionOfInterest_1a9a5c08c619eb5383833aabae962490df">centerY</link>.store(<emphasis role="keyword">static_cast&lt;</emphasis><emphasis role="keywordtype">int</emphasis><emphasis role="keyword">&gt;</emphasis>(boundingBox.y&#32;+&#32;boundingBox.height/2));
<anchor xml:id="_videotracker_8cpp_source_1l00033"/>00033 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;trackingSig.<link linkend="_structRegionOfInterest_1a0272d3fbebc59f034dd2de9e89d50598">volumeW</link>.store(<emphasis role="keyword">static_cast&lt;</emphasis><emphasis role="keywordtype">int</emphasis><emphasis role="keyword">&gt;</emphasis>(boundingBox.width));
<anchor xml:id="_videotracker_8cpp_source_1l00034"/>00034 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;trackingSig.<link linkend="_structRegionOfInterest_1a33377fff7783a831c2b373c2194e7afb">volumeH</link>.store(<emphasis role="keyword">static_cast&lt;</emphasis><emphasis role="keywordtype">int</emphasis><emphasis role="keyword">&gt;</emphasis>(boundingBox.height));
<anchor xml:id="_videotracker_8cpp_source_1l00035"/>00035 &#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;@&#32;comment&#32;:&#32;this&#32;gives&#32;the&#32;TOPLEFT&#32;corner&#32;x,y&#32;and&#32;the&#32;w&#32;and&#32;h</emphasis>
<anchor xml:id="_videotracker_8cpp_source_1l00036"/>00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;trackingSig.centerX.store(static_cast&lt;int&gt;(boundingBox.x));</emphasis>
<anchor xml:id="_videotracker_8cpp_source_1l00037"/>00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;trackingSig.centerY.store(static_cast&lt;int&gt;(boundingBox.y));</emphasis>
<anchor xml:id="_videotracker_8cpp_source_1l00038"/>00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;trackingSig.volumeW.store(static_cast&lt;int&gt;(boundingBox.width));</emphasis>
<anchor xml:id="_videotracker_8cpp_source_1l00039"/>00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;trackingSig.volumeH.store(static_cast&lt;int&gt;(boundingBox.height));</emphasis>
<anchor xml:id="_videotracker_8cpp_source_1l00040"/>00040 
<anchor xml:id="_videotracker_8cpp_source_1l00041"/>00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;}
<anchor xml:id="_videotracker_8cpp_source_1l00042"/>00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;trackingUpdated;
<anchor xml:id="_videotracker_8cpp_source_1l00043"/>00043 
<anchor xml:id="_videotracker_8cpp_source_1l00044"/>00044 }
</programlisting></section>
